% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/multiple_entries.R
\docType{methods}
\name{fhir_melt_all}
\alias{fhir_melt_all}
\alias{fhir_melt_all,data.frame-method}
\alias{fhir_melt_all,fhir_table_list-method}
\title{Melt all multiple entries}
\usage{
fhir_melt_all(indexed_data_frame, sep, brackets, rm_indices = TRUE)

\S4method{fhir_melt_all}{data.frame}(indexed_data_frame, sep, brackets, rm_indices = TRUE)

\S4method{fhir_melt_all}{fhir_table_list}(indexed_data_frame, rm_indices = TRUE)
}
\arguments{
\item{indexed_data_frame}{A data.frame/data.table with indexed multiple entries or an object of class
\linkS4class{fhir_df_list}/\linkS4class{fhir_dt_list}. Column names must reflect the path to the corresponding resource
element with \code{.} as a separator, e.g. \code{name.given}.}

\item{sep}{A string defining the separator that was used when pasting together multiple entries in \code{\link[=fhir_crack]{fhir_crack()}}.
If a \linkS4class{fhir_df_list}/\linkS4class{fhir_dt_list} is provided for \code{indexed_data_frame}, this argument is ignored.}

\item{brackets}{A character vector of length 2, defining the brackets used for the indices. If a
\linkS4class{fhir_df_list}/\linkS4class{fhir_dt_list} is provided for \code{indexed_data_frame}, this argument is ignored.}

\item{rm_indices}{Logical of length one. Should indices be removed? If \code{FALSE} the indices from the input data are preserved
the way they are. They can be extracted with \code{\link[=fhir_extract_indices]{fhir_extract_indices()}}, removed with \code{\link[=fhir_rm_indices]{fhir_rm_indices()}}
and restored with \code{\link[=fhir_restore_indices]{fhir_restore_indices()}}}
}
\value{
A data frame where each multiple entry appears in a separate row.
}
\description{
This function divides all multiple entries in a (list of) indexed data frame as produced by \code{\link[=fhir_crack]{fhir_crack()}}
into separate observations.
}
\details{
Every row containing values that consist of multiple entries will be turned into multiple rows, one for each entry.
Values on other variables will be repeated in all the new rows. This function will only work if the column names
reflect the path to the corresponding resource element with \code{.} as a separator, e.g. \code{name.given}.
These names are produced automatically by \code{\link[=fhir_table_description]{fhir_table_description()}} when the cols element of the
design is unnamed or omitted.

If \code{rm_indices=FALSE} the original indices are kept for every entry. These are useful if you need to keep in mind the
original structure of the resource.

For a more detailed description on how to use this function please see the package vignette.
}
\examples{
#unserialize example
bundles <- fhir_unserialize(example_bundles3)

#crack fhir resources
patients <- fhir_table_description(resource = "Patient")

observations <- fhir_table_description(resource = "Observation")

design <- fhir_design(patients, observations)

dfs <- fhir_crack(bundles = bundles, design = design, sep="||", brackets = c("[","]"))

#use on the list of tables:
#all tables are molten, brackets and sep are inferred from the attached design
fhir_melt_all(dfs)

#use on single df
fhir_melt_all(dfs$patients, brackets = c("[","]"), sep="||")
}
\seealso{
\code{\link[=fhir_melt]{fhir_melt()}}, \code{\link[=fhir_rm_indices]{fhir_rm_indices()}}
}
